<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Token Query</title>
        <link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css">
        <style>
            form {
                display: flex;
                flex-direction: column;
                gap: 10px;
                max-width: 300px;
            }

            label, select {
                margin: 5px 0;
                position: relative;
                border: 2px solid transparent;
                box-shadow: 0 0 5px transparent;
            }

            select:focus {
                outline: none;
                border: 2px solid #0091EA;
                box-shadow: 0 0 5px #60abda;
            }

            .hidden {
                display: none;
            }

            .tooltip {
                position: absolute;
                max-width: 300px;
                width: 300px;
                top: -5px;
                left: -15px;
                background-color: #333333;
                color: white;
                padding: 5px;
                border-radius: 5px;
                visibility: hidden;
                opacity: 0;
                transition: opacity 0.3s;
                z-index: 1000;
            }

            .tooltip::after {
                content: '';
                position: absolute;
                top: 50%;
                left: -5px;
                border-width: 5px;
                border-style: solid;
                border-color: transparent #333 transparent transparent;
                transform: translateY(-50%);
            }

            .label-container {
                display: flex;
                align-items: center;
            }

            .icon {
                margin-left: 5px;
                cursor: pointer;
                position: relative;
            }

            .icon:hover .tooltip {
                visibility: visible;
                opacity: 1;
            }
            
            p {
                line-height: 15px;
                margin-top: 5px;
                margin-bottom: 5px;
            }
        </style>
    </head>
    <body>

        <!-- Intention Form -->
        <form id="intention-form">
            <div class="label-container">
                <label for="intention">Intention:</label>
                <i class="pi pi-question-circle icon">
                    <!-- Tooltip -->
                    <span class="tooltip">
                        <p>This represents what you want to do with your token. What is the intention?</p>
                        <p>Changing this value will affect which tokens are changed or used.</p>
                        <p>This form essentially provides the context for your component.</p>
                    </span>
                </i>
            </div>
            <select id="intention">
                <option value="" disabled selected>Select</option>
                <option value="button">Update an existing component</option>
                <option value="button">Create a new component</option>
                <option value="button">Apply a theme</option>
                <option value="button">Other</option>
                <!-- Add more options as needed -->
            </select>
        </form>

        <!-- Component Type Form -->
        <form id="component-form" class="hidden">
            <div class="label-container">
                <label for="component-type">Component Type:</label>
                <i class="pi pi-question-circle icon">
                    <!-- Tooltip -->
                    <span class="tooltip">
                        <p>The type of component.</p>
                    </span>
                </i>
            </div>
            <select id="component-type">
                <option value="" disabled selected>Select</option>
                <option value="button">Button</option>
                <!-- Add more component types as needed -->
            </select>
        </form>
            
        <!-- Color Form -->
        <form id="color-container" class="hidden">
            <div class="label-container">
                <label for="color">Color:</label>
                <i class="pi pi-question-circle icon">
                    <span class="tooltip">
                        <p>Changing this value affects the color of the component.</p>
                    </span>
                </i>
            </div>
            <select id="color">
                <option value="" disabled selected>Select</option>
                <option value="blue">Blue</option>
                <option value="red">Red</option>
                <option value="green">Green</option>
                <!-- Add more colors as needed -->
            </select>
        </form>

        <!-- Border-Radius Form -->
        <form id="border-radius-container" class="hidden">
            <div class="label-container">
                <label for="border-radius">Rounded Edges:</label>
                <i class="pi pi-question-circle icon">
                    <span class="tooltip">
                        <p>Changing this value affects the border-radius of the component.</p>
                        <p>The larger the value, the more round the edges will be.</p>  
                    </span>
                </i>
            </div>
            <select id="border-radius">
                <option value="" disabled selected>Select</option>
                <option value="none">None</option>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
                <!-- Add more sizes as needed -->
            </select>
        </form>

        <script>
            const vscode = acquireVsCodeApi();

            const sendMessage = () => {
                const intention = document.getElementById('intention').value;
                const componentType = document.getElementById('component-type').value;
                const color = document.getElementById('color').value;
                const borderRadius = document.getElementById('border-radius').value;
                let generatedHTML = '';

                if (componentType === 'button') {
                    generatedHTML = "<button style=\"color=" + color + "; border-radius=" + borderRadius + "\">Button</button>";
                }
                
                vscode.postMessage({
                    command: 'generate',
                    intention: intention,
                    componentType: componentType,
                    color: color,
                    borderRadius: borderRadius,
                    generatedHTML: generatedHTML
                });
            };


            document.getElementById('intention').addEventListener('change', () => {
                const intention = document.getElementById('intention').value;

                if (intention) {
                    document.getElementById('component-form').classList.remove('hidden');
                }
                else {
                    document.getElementById('component-form').classList.add('hidden');
                }

                sendMessage();
            });

            document.getElementById('component-type').addEventListener('change', () => {
                const componentType = document.getElementById('component-type').value;

                if (componentType) {
                    document.getElementById('color-container').classList.remove('hidden');
                }
                else {
                    document.getElementById('color-container').classList.add('hidden');
                }
                sendMessage();
            });

            document.getElementById('color').addEventListener('change', () => {
                const color = document.getElementById('color').value;

                if (color) {
                    document.getElementById('border-radius-container').classList.remove('hidden');
                }
                else {
                    document.getElementById('border-radius-container').classList.add('hidden');
                }

                sendMessage();
            });
            document.getElementById('border-radius').addEventListener('change', sendMessage);

            // Resizes the tooltip depending on the side of the extension's screen
            const icons = document.querySelectorAll('.icon');
            icons.forEach(icon => {
                icon.addEventListener('mouseenter', () => {
                    const tooltip = icon.querySelector('.tooltip');
                    const rect = tooltip.getBoundingClientRect();
                    // This is the actual resizing code
                    tooltip.style.width = `${window.innerWidth - rect.left - 20}px`;
                    tooltip.style.whiteSpace = 'normal';
                });
            });
        </script>
    </body>
</html>
