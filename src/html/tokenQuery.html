<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Token Query</title>
        <link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css">
        <style>
            form {
                display: flex;
                flex-direction: column;
                gap: 10px;
                max-width: 300px;
            }

            label, select {
                margin: 5px 0;
                position: relative;
            }

            select:focus {
                outline: none;
                border: 2px solid #0091EA;
                box-shadow: 0 0 5px #60abda;
            }

            .hidden {
                display: none;
            }

            .tooltip {
                position: absolute;
                top: -5px;
                left: 25px;
                background-color: #333333;
                color: white;
                padding: 5px;
                border-radius: 5px;
                visibility: hidden;
                opacity: 0;
                transition: opacity 0.3s;
                white-space: nowrap;
                z-index: 1000;
            }

            .tooltip::after {
                content: '';
                position: absolute;
                top: 50%;
                left: -5px;
                border-width: 5px;
                border-style: solid;
                border-color: transparent #333 transparent transparent;
                transform: translateY(-50%);
            }

            .label-container {
                display: flex;
                align-items: center;
            }

            .icon {
                margin-left: 5px;
                cursor: pointer;
                position: relative;
            }

            .icon:hover .tooltip {
                visibility: visible;
                opacity: 1;
            }
        </style>
    </head>
    <body>
        <form id="component-form">
            <div class="label-container">
                <label for="component-type">Component Type:</label>
                <i class="pi pi-question-circle icon">
                    <span class="tooltip">The type of component</span>
                </i>
            </div>
            <select id="component-type">
                <option value="" disabled selected>Select</option>
                <option value="button">Button</option>
                <!-- Add more component types as needed -->
            </select>
        </form>
            
        <form id="color-container" class="hidden">
            <div class="label-container">
                <label for="color">Color:</label>
                <i class="pi pi-question-circle icon">
                    <span class="tooltip">The color of the component</span>
                </i>
            </div>
            <select id="color">
                <option value="" disabled selected>Select</option>
                <option value="blue">Blue</option>
                <option value="red">Red</option>
                <option value="green">Green</option>
                <!-- Add more colors as needed -->
            </select>
        </form>

        <form id="border-radius-container" class="hidden">
            <div class="label-container">
                <label for="border-radius">Rounded Edges:</label>
                <i class="pi pi-question-circle icon">
                    <span class="tooltip">How round the edges are of the component</span>
                </i>
            </div>
            <select id="border-radius">
                <option value="" disabled selected>Select</option>
                <option value="none">None</option>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
                <!-- Add more sizes as needed -->
            </select>
        </form>

        <script>
            const vscode = acquireVsCodeApi();
            const sendMessage = () => {
                const componentType = document.getElementById('component-type').value;
                const color = document.getElementById('color').value;
                const borderRadius = document.getElementById('border-radius').value;
                
                vscode.postMessage({
                    command: 'generate',
                    componentType: componentType,
                    color: color,
                    borderRadius: borderRadius
                });
            };

            document.getElementById('component-type').addEventListener('change', () => {
                const componentType = document.getElementById('component-type').value;

                if (componentType) {
                    document.getElementById('color-container').classList.remove('hidden');
                }
                else {
                    document.getElementById('color-container').classList.add('hidden');
                }

                sendMessage();
            });

            document.getElementById('color').addEventListener('change', () => {
                const color = document.getElementById('color').value;

                if (color) {
                    document.getElementById('border-radius-container').classList.remove('hidden');
                }
                else {
                    document.getElementById('border-radius-container').classList.add('hidden');
                }

                sendMessage();
            });
            document.getElementById('border-radius').addEventListener('change', sendMessage);

            // Resizes the tooltip depending on the side of the extension's screen
            const icons = document.querySelectorAll('.icon');
            icons.forEach(icon => {
                icon.addEventListener('mouseenter', () => {
                    const tooltip = icon.querySelector('.tooltip');
                    const rect = tooltip.getBoundingClientRect();
                    if (rect.right > window.innerWidth) {
                        tooltip.style.maxWidth = `${window.innerWidth - rect.left - 20}px`;
                        tooltip.style.whiteSpace = 'normal';
                    }
                    else {
                        tooltip.style.maxWidth = '200px';
                        tooltip.style.whiteSpace = 'nowrap';
                    }
                });
            });
        </script>
    </body>
</html>
